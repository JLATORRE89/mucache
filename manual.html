<!DOCTYPE html>
<html>
<head>
    <title>Mucache Player - User Manual</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 200px;
            position: relative;
            min-height: 100vh;
        }
        h1, h2, h3 {
            color: #333;
        }
        .section {
            margin-bottom: 30px;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 10px 0;
        }
        .tip {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 10px 0;
        }
        .quality-info {
            background-color: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 10px 0;
        }
        .new-feature {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 10px 0;
        }
        .toggle-switch {
            display: inline-block;
            position: relative;
            width: 60px;
            height: 30px;
            background-color: #ccc;
            border-radius: 15px;
            margin: 0 10px;
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: white;
            top: 3px;
            left: 3px;
            transition: all 0.3s;
        }
        .toggle-switch.on {
            background-color: #4CAF50;
        }
        .toggle-switch.on::after {
            left: 33px;
        }
        .control-example {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
        .control-icon {
            margin-right: 10px;
            color: #555;
        }
        img.screenshot {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .logs-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .logs-table th, .logs-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .logs-table th {
            background-color: #f2f2f2;
        }
        .logs-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>Mucache Player - User Manual</h1>

    <div class="section">
        <h2>Getting Started</h2>
        <p>Mucache Player is a local web application that allows you to download and store videos from supported online platforms for high-quality offline playback.</p>
        
        <div class="tip">
            <strong>Quick Start:</strong>
            <ol>
                <li>Run <code>python cache.py</code></li>
                <li>The application will open in your default web browser</li>
                <li>Paste a video URL and click "Download"</li>
            </ol>
        </div>
    </div>

    <div class="section">
        <h2>Main Features</h2>
        <ul>
            <li><strong>High-Quality Downloads:</strong> Automatically selects best available quality</li>
            <li><strong>Superior Playback:</strong> Enhanced audio and video quality from local cache</li>
            <li><strong>Sorted Playlist:</strong> Videos automatically arranged alphabetically</li>
            <li><strong>Video Controls:</strong> Play, pause, and loop videos</li>
            <li><strong>Continuous Playback:</strong> Automatically play through your entire playlist</li>
            <li><strong>Persistent Storage:</strong> Your playlist remains available between sessions</li>
            <li><strong>Detailed Logging:</strong> All operations are logged for troubleshooting</li>
        </ul>
        
        <div class="new-feature">
            <strong>New Features:</strong>
            <ul>
                <li>Tabbed Playlist: Filter videos by YouTube, Twitter/X, or view all</li>
                <li>Video Details Panel: View metadata with the Show Details button</li>
                <li>Direct Source URLs: Open original video sources in your browser</li>
                <li>Twitter/X Support: Download videos from Twitter and X (formerly Twitter)</li>
                <li>File Stats: View file size, creation date, and other metadata</li>
                <li>UI Improvements: Cleaner interface with better controls</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>Quality Benefits</h2>
        <div class="quality-info">
            <p>The application provides superior playback quality because:</p>
            <ul>
                <li>Downloads are always in highest available quality</li>
                <li>Local playback eliminates streaming quality variations</li>
                <li>No re-compression during playback</li>
                <li>Direct file access for optimal audio performance</li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>Using the Application</h2>
        
        <h3>Downloading Videos</h3>
        <ol>
            <li>Copy the URL of a video from a supported platform (YouTube, Twitter/X, etc.)</li>
            <li>Paste the URL into the input field</li>
            <li>Click the "Download" button (or press Enter)</li>
            <li>Wait for the download to complete</li>
        </ol>

        <div class="note">
            The application will show whether a video is being downloaded fresh ([NEW]) or loaded from cache ([CACHE]).
        </div>

        <h3>Playing Videos</h3>
        <ol>
            <li>Click any video in the playlist to play it</li>
            <li>Use the video player controls to play/pause, adjust volume, or toggle full screen</li>
            <li>Click the "Show Details" button to view metadata about the current video</li>
        </ol>

        <h3>Video Details</h3>
        <ul>
            <li>Click the "Show Details" button under the video player to see:
                <ul>
                    <li>Source platform (YouTube, Twitter/X, etc.)</li>
                    <li>Original URL (clickable)</li>
                    <li>Date and time the video was added</li>
                    <li>File size</li>
                    <li>Filename in the cache</li>
                </ul>
            </li>
        </ul>

        <h3>Playback Control Options</h3>
        
        <div class="control-example">
            <div class="control-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 2l4 4-4 4"></path>
                    <path d="M3 11v-1a4 4 0 0 1 4-4h14"></path>
                    <path d="M7 22l-4-4 4-4"></path>
                    <path d="M21 13v1a4 4 0 0 1-4 4H3"></path>
                </svg>
            </div>
            <span><strong>Loop Toggle:</strong> Enable to repeat the current video continuously</span>
            <div class="toggle-switch"></div>
        </div>
        
        <div class="control-example">
            <div class="control-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 18V5l12-2v13"></path>
                    <circle cx="6" cy="18" r="3"></circle>
                    <circle cx="18" cy="16" r="3"></circle>
                </svg>
            </div>
            <span><strong>Continuous Play:</strong> Enable to automatically play the next video when the current one ends</span>
            <div class="toggle-switch"></div>
        </div>
        
        <div class="control-example">
            <div class="control-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="5 4 15 12 5 20 5 4"></polygon>
                    <line x1="19" y1="5" x2="19" y2="19"></line>
                </svg>
            </div>
            <span><strong>Next:</strong> Skip to the next video in the playlist</span>
        </div>
        
        <div class="note">
            <p>When Continuous Play is enabled, the player will automatically move to the next video in the playlist when the current video finishes playing. After the last video, it will loop back to the first video in the playlist.</p>
            <p>The Loop option takes precedence over Continuous Play. If Loop is enabled, the current video will repeat regardless of Continuous Play setting.</p>
        </div>

        <h3>Managing the Playlist</h3>
        <ul>
            <li>Videos are automatically added to the playlist when downloaded</li>
            <li>Videos are automatically sorted alphabetically by title</li>
            <li>Use the tabs (All Videos, YouTube, Twitter/X) to filter the playlist</li>
            <li>Click on any video in the playlist to play it</li>
            <li>The currently playing video is highlighted in the playlist</li>
            <li>Click the "Source" button to open the original video in your browser</li>
            <li>Click the "Remove" button to delete a video from both playlist and cache</li>
        </ul>
        
        <div class="tip">
            <strong>Tip:</strong> The "Source" button is particularly useful for sharing links to the original content with others or for visiting the original page to see comments or related videos.
        </div>
    </div>

    <div class="section">
        <h2>Supported Platforms</h2>
        <ul>
            <li><strong>YouTube:</strong> Videos from youtube.com and youtu.be</li>
            <li><strong>Twitter/X:</strong> Videos from twitter.com and x.com</li>
            <li><strong>Other platforms:</strong> The application supports many other video platforms</li>
        </ul>
        
        <div class="note">
            <p>The application automatically detects the source platform and uses the appropriate download method. Twitter/X videos use specialized extraction methods to ensure compatibility.</p>
        </div>
    </div>

    <div class="section">
        <h2>Cache Location</h2>
        <p>Videos are stored in your Downloads folder:</p>
        <ul>
            <li>Windows: <code>%USERPROFILE%\Downloads\mucache\data</code></li>
            <li>Linux/macOS: <code>~/Downloads/mucache/data</code></li>
        </ul>
    </div>
    
    <div class="section">
        <h2>Log Files</h2>
        <p>The application maintains detailed logs in the <code>mucache/data/logs</code> directory:</p>
        
        <table class="logs-table">
            <tr>
                <th>Log File</th>
                <th>Description</th>
            </tr>
            <tr>
                <td><code>access.log</code></td>
                <td>Records all normal operations and information messages</td>
            </tr>
            <tr>
                <td><code>error.log</code></td>
                <td>Records errors and exceptions that occur during operation</td>
            </tr>
            <tr>
                <td><code>app.log</code></td>
                <td>Comprehensive log containing both normal operations and errors</td>
            </tr>
        </table>
        
        <div class="tip">
            <strong>Troubleshooting Tip:</strong> If you encounter issues with the application, check the log files for details about what went wrong. These logs are especially useful for diagnosing download problems or connection issues.
        </div>
    </div>

    <div class="section">
        <h2>Automatic Shutdown</h2>
        <p>The application includes automatic shutdown features:</p>
        <ul>
            <li>Closes automatically when you close the browser window</li>
            <li>Handles Ctrl+C shutdown gracefully</li>
            <li>Cleans up resources on exit</li>
        </ul>
    </div>

    <div class="section">
        <h2>Troubleshooting</h2>
        <h3>Common Issues</h3>
        <ul>
            <li><strong>Download fails:</strong> Check your internet connection and verify the URL is from a supported platform</li>
            <li><strong>Twitter/X videos fail:</strong> Some Twitter/X videos may require multiple attempts or may not be downloadable</li>
            <li><strong>Video won't play:</strong> Ensure the video file wasn't moved or deleted from the cache directory</li>
            <li><strong>Application won't start:</strong> Make sure port 8000 is available and you have Python installed</li>
            <li><strong>Application doesn't close:</strong> Close the browser window or use Ctrl+C in the terminal</li>
            <li><strong>Connection errors:</strong> These are normal when streaming large files and are handled automatically</li>
        </ul>

        <h3>Error Messages</h3>
        <ul>
            <li><strong>"Error processing video":</strong> The URL may be invalid or the video is not available</li>
            <li><strong>"Port in use":</strong> Another application is using port 8000. Close other applications and try again</li>
            <li><strong>"File not found":</strong> The requested video file is missing from the cache directory</li>
        </ul>
        
        <h3>Using Log Files for Troubleshooting</h3>
        <p>When encountering issues:</p>
        <ol>
            <li>Check the <code>error.log</code> file in the logs directory first</li>
            <li>For more context, review the <code>app.log</code> file to see the sequence of events</li>
            <li>Check timestamps to correlate events with when you experienced the issue</li>
        </ol>
    </div>

    <div class="section">
        <h2>Technical Notes</h2>
        <ul>
            <li>The application runs a local web server on port 8000</li>
            <li>Videos are stored in MP4 format</li>
            <li>Playlist data is stored in a JSON file in the cache directory</li>
            <li>Twitter/X videos use specialized extraction methods</li>
            <li>File metadata is available via API</li>
            <li>The application uses HTML5 video playback capabilities</li>
            <li>React is used for the UI with Tailwind CSS for styling</li>
            <li>Uses a heartbeat mechanism to detect browser window closure</li>
            <li>Implements a threaded server for better performance</li>
            <li>Files are streamed in chunks to handle large videos efficiently</li>
            <li>Connection errors are gracefully handled to prevent application crashes</li>
            <li>Comprehensive logging system captures all application events</li>
        </ul>
    </div>

    <div class="legal-footer">
        <strong>Legal Notice:</strong> Users of this software are solely responsible for ensuring they have appropriate rights and permissions for any content they download, modify, or redistribute. The software is provided "as is", and the providers of this software assume no liability for any damages arising from its use or misuse. Users must comply with all applicable laws and platform terms of service in their jurisdiction.
    </div>

    <script>
        // Simple script to make the toggle switches in the documentation interactive
        document.addEventListener('DOMContentLoaded', function() {
            const toggleSwitches = document.querySelectorAll('.toggle-switch');
            toggleSwitches.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('on');
                });
            });
        });
    </script>
</body>
</html>